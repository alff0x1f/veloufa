(function(){var i=function(k){var j;switch(k){case"thin":j="2px";break;case"medium":j="4px";break;case"thick":j="6px";break;default:j=k}return j};var e=function(k){var j;var l={};if(document.defaultView&&document.defaultView.getComputedStyle){j=k.ownerDocument.defaultView.getComputedStyle(k,"");if(j){l.top=parseInt(j.borderTopWidth,10)||0;l.bottom=parseInt(j.borderBottomWidth,10)||0;l.left=parseInt(j.borderLeftWidth,10)||0;l.right=parseInt(j.borderRightWidth,10)||0;return l}}else{if(document.documentElement.currentStyle){if(k.currentStyle){l.top=parseInt(i(k.currentStyle.borderTopWidth),10)||0;l.bottom=parseInt(i(k.currentStyle.borderBottomWidth),10)||0;l.left=parseInt(i(k.currentStyle.borderLeftWidth),10)||0;l.right=parseInt(i(k.currentStyle.borderRightWidth),10)||0;return l}}}l.top=parseInt(k.style["border-top-width"],10)||0;l.bottom=parseInt(k.style["border-bottom-width"],10)||0;l.left=parseInt(k.style["border-left-width"],10)||0;l.right=parseInt(k.style["border-right-width"],10)||0;return l};var h={x:0,y:0};var d=function(j){h.x=(typeof document.documentElement.scrollLeft!=="undefined"?document.documentElement.scrollLeft:document.body.scrollLeft);h.y=(typeof document.documentElement.scrollTop!=="undefined"?document.documentElement.scrollTop:document.body.scrollTop)};d();var g=function(j){var l=0,k=0;j=j||window.event;if(typeof j.pageX!=="undefined"){l=j.pageX;k=j.pageY}else{if(typeof j.clientX!=="undefined"){l=j.clientX+h.x;k=j.clientY+h.y}}return{left:l,top:k}};var a=function(o){var l=o.offsetLeft;var j=o.offsetTop;var r=o.offsetParent;while(r!==null){if(r!==document.body&&r!==document.documentElement){l-=r.scrollLeft;j-=r.scrollTop}var n=r;var k=n.offsetLeft;var s=n.offsetTop;if(!k&&!s&&window.getComputedStyle){var p=document.defaultView.getComputedStyle(n,null).MozTransform||document.defaultView.getComputedStyle(n,null).WebkitTransform;if(p){if(typeof p==="string"){var q=p.split(",");k+=parseInt(q[4],10)||0;s+=parseInt(q[5],10)||0}}}l+=k;j+=s;r=r.offsetParent}return{left:l,top:j}};var c=function(l,k){if(l&&k){for(var j in k){if(k.hasOwnProperty(j)){l[j]=k[j]}}}return l};var b=function(j,k){if(typeof k!=="undefined"){j.style.opacity=k}if(typeof j.style.opacity!=="undefined"){j.style.filter="alpha(opacity="+(j.style.opacity*100)+")"}};function f(m,j){var l=this;var k=new google.maps.OverlayView();k.onAdd=function(){l.init_(m,j)};k.draw=function(){};k.onRemove=function(){};k.setMap(m);this.prjov_=k}f.prototype.init_=function(m,j){var k;var l=this;this.map_=m;j=j||{};this.key_=j.key||"shift";this.key_=this.key_.toLowerCase();this.borderWidths_=e(this.map_.getDiv());this.veilDiv_=[];for(k=0;k<4;k++){this.veilDiv_[k]=document.createElement("div");this.veilDiv_[k].onselectstart=function(){return false};c(this.veilDiv_[k].style,{backgroundColor:"gray",opacity:0.25,cursor:"crosshair"});c(this.veilDiv_[k].style,j.paneStyle);c(this.veilDiv_[k].style,j.veilStyle);c(this.veilDiv_[k].style,{position:"absolute",overflow:"hidden",zIndex:10001,display:"none"});if(this.key_==="shift"){this.veilDiv_[k].style.MozUserSelect="none"}b(this.veilDiv_[k]);if(this.veilDiv_[k].style.backgroundColor==="transparent"){this.veilDiv_[k].style.backgroundColor="white";b(this.veilDiv_[k],0)}this.map_.getDiv().appendChild(this.veilDiv_[k])}this.visualEnabled_=j.visualEnabled||false;this.visualPosition_=j.visualPosition||google.maps.ControlPosition.LEFT;this.visualPositionOffset_=j.visualPositionOffset||new google.maps.Size(35,0);this.visualPositionIndex_=j.visualPositionIndex||null;this.visualSprite_=j.visualSprite||"http://maps.gstatic.com/mapfiles/ftr/controls/dragzoom_btn.png";this.visualSize_=j.visualSize||new google.maps.Size(20,20);this.visualTips_=j.visualTips||{};this.visualTips_.off=this.visualTips_.off||"Turn on drag zoom mode";this.visualTips_.on=this.visualTips_.on||"Turn off drag zoom mode";this.boxDiv_=document.createElement("div");c(this.boxDiv_.style,{border:"4px solid #736AFF"});c(this.boxDiv_.style,j.boxStyle);c(this.boxDiv_.style,{position:"absolute",display:"none"});b(this.boxDiv_);this.map_.getDiv().appendChild(this.boxDiv_);this.boxBorderWidths_=e(this.boxDiv_);this.listeners_=[google.maps.event.addDomListener(document,"keydown",function(n){l.onKeyDown_(n)}),google.maps.event.addDomListener(document,"keyup",function(n){l.onKeyUp_(n)}),google.maps.event.addDomListener(this.veilDiv_[0],"mousedown",function(n){l.onMouseDown_(n)}),google.maps.event.addDomListener(document,"mousedown",function(n){l.onMouseDownDocument_(n)}),google.maps.event.addDomListener(document,"mousemove",function(n){l.onMouseMove_(n)}),google.maps.event.addDomListener(document,"mouseup",function(n){l.onMouseUp_(n)}),google.maps.event.addDomListener(window,"scroll",d)];this.hotKeyDown_=false;this.mouseDown_=false;this.dragging_=false;this.startPt_=null;this.endPt_=null;this.mapWidth_=null;this.mapHeight_=null;this.mousePosn_=null;this.mapPosn_=null;if(this.visualEnabled_){this.initControl_(this.map_,this.visualPositionOffset_);if(this.visualPositionIndex_!==null){this.buttonDiv_.index=this.visualPositionIndex_}this.map_.controls[this.visualPosition_].push(this.buttonDiv_);this.controlIndex_=this.map_.controls[this.visualPosition_].length-1}};f.prototype.initControl_=function(k,l){var j=this;this.buttonDiv_=document.createElement("div");this.buttonDiv_.style.height=this.visualSize_.height+"px";this.buttonDiv_.style.width=this.visualSize_.width+"px";this.buttonDiv_.style.background="transparent url("+this.visualSprite_+") no-repeat -40px 0";this.buttonDiv_.title=this.visualTips_.off;this.buttonDiv_.onclick=function(m){j.hotKeyDown_=!j.hotKeyDown_;if(j.hotKeyDown_){j.buttonDiv_.style.backgroundPosition=-(j.visualSize_.height*0)+"px 0";j.buttonDiv_.title=j.visualTips_.on;google.maps.event.trigger(j,"activate")}else{j.buttonDiv_.style.backgroundPosition=-(j.visualSize_.height*2)+"px 0";j.buttonDiv_.title=j.visualTips_.off;google.maps.event.trigger(j,"deactivate")}j.onMouseMove_(m)};this.buttonDiv_.onmouseover=function(){j.buttonDiv_.style.backgroundPosition=-(j.visualSize_.height*1)+"px 0"};this.buttonDiv_.onmouseout=function(){if(j.hotKeyDown_){j.buttonDiv_.style.backgroundPosition=-(j.visualSize_.height*0)+"px 0";j.buttonDiv_.title=j.visualTips_.on}else{j.buttonDiv_.style.backgroundPosition=-(j.visualSize_.height*2)+"px 0";j.buttonDiv_.title=j.visualTips_.off}};this.buttonDiv_.ondragstart=function(){return false};c(this.buttonDiv_.style,{zIndex:10002,cursor:"pointer",marginTop:l.height+"px",marginLeft:l.width+"px"});k.getDiv().appendChild(this.buttonDiv_);return};f.prototype.isHotKeyDown_=function(k){var j;k=k||window.event;j=(k.shiftKey&&this.key_==="shift")||(k.altKey&&this.key_==="alt")||(k.ctrlKey&&this.key_==="ctrl");if(!j){switch(k.keyCode){case 16:if(this.key_==="shift"){j=true}break;case 17:if(this.key_==="ctrl"){j=true}break;case 18:if(this.key_==="alt"){j=true}break}}return j};f.prototype.isMouseOnMap_=function(){var j=this.mousePosn_;if(j){var k=this.mapPosn_;var l=this.map_.getDiv();return j.left>k.left&&j.left<(k.left+l.offsetWidth)&&j.top>k.top&&j.top<(k.top+l.offsetHeight)}else{return false}};f.prototype.setVeilVisibility_=function(){var k;if(this.map_&&this.hotKeyDown_&&this.isMouseOnMap_()){var j=this.map_.getDiv();this.mapWidth_=j.offsetWidth-(this.borderWidths_.left+this.borderWidths_.right);this.mapHeight_=j.offsetHeight-(this.borderWidths_.top+this.borderWidths_.bottom);this.veilDiv_[0].style.left="0px";this.veilDiv_[0].style.top="0px";this.veilDiv_[0].style.width=this.mapWidth_+"px";this.veilDiv_[0].style.height=this.mapHeight_+"px";for(k=1;k<this.veilDiv_.length;k++){this.veilDiv_[k].style.width="0px";this.veilDiv_[k].style.height="0px"}for(k=0;k<this.veilDiv_.length;k++){this.veilDiv_[k].style.display="block"}}else{for(k=0;k<this.veilDiv_.length;k++){this.veilDiv_[k].style.display="none"}}};f.prototype.onKeyDown_=function(j){if(this.map_&&!this.hotKeyDown_&&this.isHotKeyDown_(j)){this.mapPosn_=a(this.map_.getDiv());this.hotKeyDown_=true;this.setVeilVisibility_();google.maps.event.trigger(this,"activate")}if(this.visualEnabled_&&this.isHotKeyDown_(j)){this.buttonDiv_.style.display="none"}};f.prototype.getMousePoint_=function(l){var j=g(l);var k=new google.maps.Point();k.x=j.left-this.mapPosn_.left-this.borderWidths_.left;k.y=j.top-this.mapPosn_.top-this.borderWidths_.top;k.x=Math.min(k.x,this.mapWidth_);k.y=Math.min(k.y,this.mapHeight_);k.x=Math.max(k.x,0);k.y=Math.max(k.y,0);return k};f.prototype.onMouseDown_=function(k){if(this.map_&&this.hotKeyDown_){this.mapPosn_=a(this.map_.getDiv());this.dragging_=true;this.startPt_=this.endPt_=this.getMousePoint_(k);this.boxDiv_.style.width=this.boxDiv_.style.height="0px";var j=this.prjov_.getProjection();var l=j.fromContainerPixelToLatLng(this.startPt_);if(this.visualEnabled_){this.buttonDiv_.style.display="none"}google.maps.event.trigger(this,"dragstart",l)}};f.prototype.onMouseDownDocument_=function(j){this.mouseDown_=true};f.prototype.onMouseMove_=function(n){this.mousePosn_=g(n);if(this.dragging_){this.endPt_=this.getMousePoint_(n);var m=Math.min(this.startPt_.x,this.endPt_.x);var l=Math.min(this.startPt_.y,this.endPt_.y);var k=Math.abs(this.startPt_.x-this.endPt_.x);var j=Math.abs(this.startPt_.y-this.endPt_.y);this.veilDiv_[0].style.top="0px";this.veilDiv_[0].style.left="0px";this.veilDiv_[0].style.width=m+"px";this.veilDiv_[0].style.height=this.mapHeight_+"px";this.veilDiv_[1].style.top="0px";this.veilDiv_[1].style.left=(m+k)+"px";this.veilDiv_[1].style.width=(this.mapWidth_-(m+k))+"px";this.veilDiv_[1].style.height=this.mapHeight_+"px";this.veilDiv_[2].style.top="0px";this.veilDiv_[2].style.left=m+"px";this.veilDiv_[2].style.width=k+"px";this.veilDiv_[2].style.height=l+"px";this.veilDiv_[3].style.top=(l+j)+"px";this.veilDiv_[3].style.left=m+"px";this.veilDiv_[3].style.width=k+"px";this.veilDiv_[3].style.height=(this.mapHeight_-(l+j))+"px";this.boxDiv_.style.top=l+"px";this.boxDiv_.style.left=m+"px";if(k-(this.boxBorderWidths_.left+this.boxBorderWidths_.right)<1){this.boxDiv_.style.width=(this.boxBorderWidths_.left+this.boxBorderWidths_.right+1)+"px"}else{this.boxDiv_.style.width=(k-(this.boxBorderWidths_.left+this.boxBorderWidths_.right))+"px"}if(j-(this.boxBorderWidths_.left+this.boxBorderWidths_.right)<1){this.boxDiv_.style.height=(this.boxBorderWidths_.top+this.boxBorderWidths_.bottom+1)+"px"}else{this.boxDiv_.style.height=(j-(this.boxBorderWidths_.top+this.boxBorderWidths_.bottom))+"px"}this.boxDiv_.style.display="block";google.maps.event.trigger(this,"drag",new google.maps.Point(m,l+j),new google.maps.Point(m+k,l),this.prjov_.getProjection())}else{if(!this.mouseDown_){this.mapPosn_=a(this.map_.getDiv());this.setVeilVisibility_()}}};f.prototype.onMouseUp_=function(p){var q;var r=this;this.mouseDown_=false;if(this.dragging_){var l=Math.min(this.startPt_.x,this.endPt_.x);var s=Math.min(this.startPt_.y,this.endPt_.y);var k=Math.abs(this.startPt_.x-this.endPt_.x);var v=Math.abs(this.startPt_.y-this.endPt_.y);var u=true;if(u){l+=this.borderWidths_.left;s+=this.borderWidths_.top}var j=this.prjov_.getProjection();var t=j.fromContainerPixelToLatLng(new google.maps.Point(l,s+v));var m=j.fromContainerPixelToLatLng(new google.maps.Point(l+k,s));var o=new google.maps.LatLngBounds(t,m);q=this.map_.getZoom();this.map_.fitBounds(o);if(this.map_.getZoom()<q){this.map_.setZoom(q)}var w=j.fromLatLngToContainerPixel(t);var n=j.fromLatLngToContainerPixel(m);if(u){w.x-=this.borderWidths_.left;w.y-=this.borderWidths_.top;n.x-=this.borderWidths_.left;n.y-=this.borderWidths_.top}this.boxDiv_.style.left=w.x+"px";this.boxDiv_.style.top=n.y+"px";this.boxDiv_.style.width=(Math.abs(n.x-w.x)-(this.boxBorderWidths_.left+this.boxBorderWidths_.right))+"px";this.boxDiv_.style.height=(Math.abs(n.y-w.y)-(this.boxBorderWidths_.top+this.boxBorderWidths_.bottom))+"px";setTimeout(function(){r.boxDiv_.style.display="none"},1000);this.dragging_=false;this.onMouseMove_(p);google.maps.event.trigger(this,"dragend",o);if(!this.isHotKeyDown_(p)){this.onKeyUp_(p)}}};f.prototype.onKeyUp_=function(k){var j;if(this.map_&&this.hotKeyDown_){this.hotKeyDown_=false;if(this.dragging_){this.boxDiv_.style.display="none";this.dragging_=false}for(j=0;j<this.veilDiv_.length;j++){this.veilDiv_[j].style.display="none"}if(this.visualEnabled_){this.buttonDiv_.style.backgroundPosition=-(this.visualSize_.height*2)+"px 0";this.buttonDiv_.title=this.visualTips_.off;this.buttonDiv_.style.display=""}google.maps.event.trigger(this,"deactivate")}};google.maps.Map.prototype.enableKeyDragZoom=function(j){this.dragZoom_=new f(this,j)};google.maps.Map.prototype.disableKeyDragZoom=function(){var j;var k=this.dragZoom_;if(k){for(j=0;j<this.listeners_.length;++j){google.maps.event.removeListener(k.listeners_[j])}this.getDiv().removeChild(k.boxDiv_);for(j=0;j<k.veilDiv_.length;j++){this.getDiv().removeChild(k.veilDiv_[j])}if(k.visualEnabled_){this.controls[k.visualPosition_].removeAt(k.controlIndex_)}k.prjov_.setMap(null);this.dragZoom_=null}};google.maps.Map.prototype.keyDragZoomEnabled=function(){return this.dragZoom_!==null};google.maps.Map.prototype.getDragZoomObject=function(){return this.dragZoom_}})();